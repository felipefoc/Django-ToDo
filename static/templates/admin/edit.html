{% extends 'admin//base_admin.html' %}
{% block head %}
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
<link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css"/>
<script src="https://unpkg.com/gijgo@1.9.13/js/messages/messages.pt-br.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript" src="assets/js/cidadeseestados.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-masker/1.1.0/vanilla-masker.min.js"></script>
{% endblock %}
{% block title %}Novo Corretor{% endblock %}

{% block style %}
form {
position: relative;
top: 2px;
background-color: white;
border: 20px solid white;
border-radius: 5px;
width : 110%;
height: 700px;
transition: 0.2s;
}
.form-row {
margin: 10px;
padding: 5px;
}

#headercard {
background-color: orange !important;
text-align: -webkit-left;

}

#radio {
display: inline-grid;
max-inline-size: min-content;
}

.gj-datepicker-md i{
display: none;
}

.btn {
display: block;
margin: auto;
background-color: orange !important;
}
#submit {

}
#dadoscomerciais {
display: none;
visibility: hidden;
opacity: 0;
transition: visibility 0s, opacity 0.5s linear;
}


{% endblock %}
{% block content %}


<form method="post" class="card card-nav-tabs" id="form" name="form_consulta">
    <h2 class="card-header card-header-warning" id="headercard">Cadastro do corretor {{ corretor.nome }}</h2>
    <div class="form-row">
        <div class="col">
            <label>Nome:</label>
            <input type="text" class="form-control" name="nome" value="{{ corretor.nome }}">
        </div>
        <div class="col">
            <label>Sobrenome:</label>
            <input type="text" class="form-control" name="sobrenome" value="{{ corretor.sobrenome }}">
        </div>
        <div class="col">
            <label>Nome mãe:</label>
            <input type="text" class="form-control" name="nome_mae" value="{{ corretor.nome_mae }}">
        </div>
    </div>
    <div class="form-row">
        <div class="col" id="radio">
            <div class="form-check form-check-radio">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="radio"
                           value="cpf" onclick="ativarFunc()" onClick =0>
                    CPF
                    <span class="circle">
                    <span class="check"></span>
                    </span>
                </label>
            </div>
            <div class="form-check form-check-radio">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="radio"
                           value="cnpj" onclick="ativarFunc2()" onClick =0>
                    CNPJ
                    <span class="circle">
                    <span class="check"></span>
                    </span>
                </label>
            </div>
        </div>
        <div class="col">
            <input type="text" class="form-control" id="cpfcnpj"
                   name="cpf_cnpj" size="18" OnKeyUp="cnpj_cpf(this.name,this.value,'form_consulta',this.form)" onKeypress="campo_numerico()" value="{{ corretor.cpfcnpj }}"/>
        </div>
        <div class="col">
            <label>Data de nascimento:</label>
            <input type="text" class="form-control" id="datepicker" name="data_de_nascimento" value="{{ corretor.data_de_nascimento }}"/>
        </div>
        <div class="col">
            <label>Telefone Residencial:</label>
            <input type="text" class="form-control" name="telephone1" value="{{ corretor.tel_residencial }}">
        </div>
        <div class="col">
            <label>Celular:</label>
            <input type="text" class="form-control" name="telephone2" value="{{ corretor.tel_cel }}">
        </div>
        <div class="col">
            <label>Celular:</label>
            <input type="text" class="form-control" name="telephone3" value="{{ corretor.tel_cel2 }}">
        </div>
    </div>
    <div class="form-row">
        <div class="col">
            <label>Apelido/login:</label>
            <input type="text" class="form-control" name="apelido" value="{{ corretor.apelido }}">
        </div>
        <div class="col">
            <label>Senha:</label>
            <input type="password" class="form-control" name="senha" value="{{ corretor.senha }}">
        </div>
    </div>
    <div class="form-row">
        <div class="col">
            <label>Nome da Loja:</label>
            <select id="inputloja" class="form-control" name="loja_nome">
                <option>{{ corretor.nome_loja }}</option>
                {% for item in lojas %}
                <option value="{{item.nome}}">{{item.nome}}</option>
                {% endfor %}
            </select>
        </div>
        <div class="col">
            <label>RG:</label>
            <input type="text" class="form-control" name="rg" value="{{ corretor.rg }}">
        </div>
        <div class="col">
            <label>Data de emissão do RG:</label>
            <input type="text" class="form-control" id="datepicker1" name="data_de_emissao" value="{{ corretor.rg_emissao }}"/>
        </div>
        <div class="col">
            <label>CEP:</label>
            <input type="text" class="form-control" name="CEP" value="{{ corretor.cep }}">
        </div>
        <div class="col">
            <label>Logradouro:</label>
            <input type="text" class="form-control" name="logradouro" value="{{ corretor.logradouro }}">
        </div>
    </div>
    <div class="form-row">
        <div class="col">
            <label>Nº:</label>
            <input type="text" class="form-control" name="numero" value="{{ corretor.numero }}">
        </div>
        <div class="col">
            <label>Complemento:</label>
            <input type="text" class="form-control" name="complemento" value="{{ corretor.complemento }}">
        </div>
        <div class="col">
            <label>Bairro:</label>
            <input type="text" class="form-control" name="bairro" value="{{ corretor.bairro }}">
        </div>
    </div>
    <div class="form-row">
        <div class="col">
            <label>Estado:</label>
            <select>{{ corretor.estado }}</select>
            <select id="estado1" class="form-control" name="estado"></select>
        </div>
        <div class="col">
            <label>Cidade:</label>
            <select>{{ corretor.cidade }}</select>
            <select id="cidade1" class="form-control" name="cidade"></select>
            <script language="JavaScript" type="text/javascript" charset="utf-8">
                      new dgCidadesEstados({
                        cidade: document.getElementById('cidade1'),
                        estado: document.getElementById('estado1')
                      })
            </script>
        </div>
        <div class="col">
            <label>E-mail:</label>
            <input class="form-control" type="email" name="email" value="{{ corretor.email }}">
        </div>
        <div class="col">
            <label>E-mail:</label>
            <input class="form-control" type="email" name="email2" value="{{ corretor.email2 }}">
        </div>
    </div>
    <div id="dadoscomerciais">
        <div class="form-row">
            <h2>Dados comerciais</h2>
        </div>
        <div class="form-row">
            <div class="col">
                <label>Nome da empresa:</label>
                <input type="text" class="form-control" name="nome_empresa">
            </div>
            <div class="col">
                <label>Logradouro:</label>
                <input type="text" class="form-control" name="logradouro_empresa">
            </div>
            <div class="col">
                <label>Nº:</label>
                <input type="text" class="form-control" name="numero_empresa">
            </div>
            <div class="col">
                <label>Complemento:</label>
                <input type="text" class="form-control" name="complemento_empresa">
            </div>
        </div>
    </div>
</form>


<script>
function inputHandler(masks, max, event) {
	var c = event.target;
	var v = c.value.replace(/\D/g, '');
	var m = c.value.length > max ? 1 : 0;
	VMasker(c).unMask();
	VMasker(c).maskPattern(masks[m]);
	c.value = VMasker.toPattern(v, masks[m]);
}

var telMask = ['(99) 9999-99999', '(99) 99999-9999'];
var tel = document.querySelector('input[name=telephone1]');
VMasker(tel).maskPattern(telMask[0]);
tel.addEventListener('input', inputHandler.bind(undefined, telMask, 14), false);







</script>
<script>
function inputHandler(masks, max, event) {
	var c = event.target;
	var v = c.value.replace(/\D/g, '');
	var m = c.value.length > max ? 1 : 0;
	VMasker(c).unMask();
	VMasker(c).maskPattern(masks[m]);
	c.value = VMasker.toPattern(v, masks[m]);
}

var telMask = ['(99) 9999-99999', '(99) 99999-9999'];
var tel = document.querySelector('input[name=telephone2]');
VMasker(tel).maskPattern(telMask[0]);
tel.addEventListener('input', inputHandler.bind(undefined, telMask, 14), false);







</script>
<script>
function inputHandler(masks, max, event) {
	var c = event.target;
	var v = c.value.replace(/\D/g, '');
	var m = c.value.length > max ? 1 : 0;
	VMasker(c).unMask();
	VMasker(c).maskPattern(masks[m]);
	c.value = VMasker.toPattern(v, masks[m]);
}

var telMask = ['(99) 9999-99999', '(99) 99999-9999'];
var tel = document.querySelector('input[name=telephone3]');
VMasker(tel).maskPattern(telMask[0]);
tel.addEventListener('input', inputHandler.bind(undefined, telMask, 14), false);







</script>
<script>
function ativarFunc() {
var radiox = document.getElementById("cpfcnpj");
radiox.placeholder = "Digite o CPF";
document.getElementById("dadoscomerciais").style.visibility = "hidden";
document.getElementById("dadoscomerciais").style.display = "None";
document.getElementById("dadoscomerciais").style.opacity = "0";
document.getElementById("form").style.height = "110%"
radiox.setAttribute("name" ,"cpf");
}
</script>
<script>
function ativarFunc2() {
var radioy = document.getElementById("cpfcnpj");
radioy.placeholder = "Digite o CNPJ";
document.getElementById("dadoscomerciais").style.display = "grid";
document.getElementById("dadoscomerciais").style.visibility = "visible";
document.getElementById("dadoscomerciais").style.opacity = "1";
document.getElementById("form").style.height = "200%";
radioy.setAttribute("name" ,"cnpj");
}










</script>
<script type="text/javascript">
$('#datepicker').datepicker({
  locale: 'pt-br',
});
</script>

<script type="text/javascript">
$('#datepicker1').datepicker({
  locale: 'pt-br',
});
</script>
<script>

	function campo_numerico (){

			if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;

	}


	/*function cnpj_cpf verifica qual das funcoes tem que chamar cpf ou cnpj*/

	function cnpj_cpf(campo,documento,f,formi){

		form = formi;

		for (Count = 0; Count < 2; Count++){

			if (form.radio[Count].checked)
				break;
		}


		if (Count == 0){
			mascara_cpf (campo,documento,f);
		}

		else{
			mascara_cnpj (campo,documento,f);
		}
	}

	function mascara_cnpj (campo,documento,f){
		var mydata = '';
		mydata = mydata + documento;

		if (mydata.length == 2){
			mydata   = mydata + '.';

			ct_campo = eval("document."+f+"."+campo+".value = mydata");
			ct_campo;
		}

		if (mydata.length == 6){
					mydata   = mydata + '.';

					ct_campo = eval("document."+f+"."+campo+".value = mydata");
					ct_campo;
		}

		if (mydata.length == 10){
			mydata 	  = mydata + '/';

			ct_campo1 = eval("document."+f+"."+campo+".value = mydata");
			ct_campo1;
		}

		if (mydata.length == 15){
					mydata 	  = mydata + '-';

					ct_campo1 = eval("document."+f+"."+campo+".value = mydata");
					ct_campo1;
		}

		if (mydata.length == 18){

			valida_cnpj(f,campo);
		}
	}


	function mascara_cpf (campo,documento,f){
			var mydata = '';
			mydata = mydata + documento;

			if (mydata.length == 3){
				mydata   = mydata + '.';

				ct_campo = eval("document."+f+"."+campo+".value = mydata");
				ct_campo;
			}

			if (mydata.length == 7){
						mydata   = mydata + '.';

						ct_campo = eval("document."+f+"."+campo+".value = mydata");
						ct_campo;
			}

			if (mydata.length == 11){
				mydata 	  = mydata + '-';

				ct_campo1 = eval("document."+f+"."+campo+".value = mydata");
				ct_campo1;
			}

			if (mydata.length == 14){

				valida_cpf(f,campo);
			}

	}


	function valida_cnpj(f,campo){

			pri = eval("document."+f+"."+campo+".value.substring(0,2)");
			seg = eval("document."+f+"."+campo+".value.substring(3,6)");
			ter = eval("document."+f+"."+campo+".value.substring(7,10)");
			qua = eval("document."+f+"."+campo+".value.substring(11,15)");
			qui = eval("document."+f+"."+campo+".value.substring(16,18)");

			var i;
			var numero;
			var situacao = '';

			numero = (pri+seg+ter+qua+qui);

			s = numero;


			c = s.substr(0,12);
			var dv = s.substr(12,2);
			var d1 = 0;

			for (i = 0; i < 12; i++){
				d1 += c.charAt(11-i)*(2+(i % 8));
			}

			if (d1 == 0){
				var result = "falso";
			}
				d1 = 11 - (d1 % 11);

			if (d1 > 9) d1 = 0;

				if (dv.charAt(0) != d1){
					var result = "falso";
				}

			d1 *= 2;
			for (i = 0; i < 12; i++){
				d1 += c.charAt(11-i)*(2+((i+1) % 8));
			}

			d1 = 11 - (d1 % 11);
			if (d1 > 9) d1 = 0;

				if (dv.charAt(1) != d1){
					var result = "falso";
				}


			if (result == "falso") {
				alert("CNPJ inv�lido!");
				aux1 = eval("document."+f+"."+campo+".focus");
				aux2 = eval("document."+f+"."+campo+".value = ''");

			}
	}


	function valida_cpf(f,campo){

			pri = eval("document."+f+"."+campo+".value.substring(0,3)");
			seg = eval("document."+f+"."+campo+".value.substring(4,7)");
			ter = eval("document."+f+"."+campo+".value.substring(8,11)");
			qua = eval("document."+f+"."+campo+".value.substring(12,14)");

			var i;
			var numero;

			numero = (pri+seg+ter+qua);

			s = numero;
			c = s.substr(0,9);
			var dv = s.substr(9,2);
			var d1 = 0;

			for (i = 0; i < 9; i++){
				d1 += c.charAt(i)*(10-i);
			}

			if (d1 == 0){
				var result = "falso";
			}

			d1 = 11 - (d1 % 11);
			if (d1 > 9) d1 = 0;

			if (dv.charAt(0) != d1){
				var result = "falso";
			}

			d1 *= 2;
			for (i = 0; i < 9; i++){
				d1 += c.charAt(i)*(11-i);
			}

			d1 = 11 - (d1 % 11);
			if (d1 > 9) d1 = 0;

			if (dv.charAt(1) != d1){
				var result = "falso";
			}


			if (result == "falso") {
				alert("CPF inv�lido!");
				aux1 = eval("document."+f+"."+campo+".focus");
				aux2 = eval("document."+f+"."+campo+".value = ''");

			}
	}

</script>
{% endblock %}


